<script type="text/javascript">
    var checkInsertValue = 0, checkCostPrice = 0, checkMinusCostPrice = 0;
    $("#patDOB").datepicker({
        format: 'dd-mm-yyyy',
    });
    $('#curDate').text(moment().format('DD-MM-YYYY'));
    function openVipStatus() {
        var val = document.getElementById("openVip").checked;
        if (val) {
            $("#isVIP").val(1);
        } else {
            $("#isVIP").val(0);
        }
    }
    function delete_row(elem) {
        checkMinusCostPrice = 0;
        var x = dynTableRow(elem);
        var table = document.getElementById('dyn_table');
        var table_length = table.rows.length;
        for (var i = 0; i < table_length - 1; i++) {
            if (table_length > 2) {
                checkMinusCostPrice = 1;
                dynTableDeleteRow(x);
                calculation();
            }
        }
    }
    function deleteRow(elem) {
        var x = dynTableRow(elem);
        var table = document.getElementById('kinTable');
        var table_length = table.rows.length;
        for (var i = 0; i < table_length - 1; i++) {
            if (table_length > 2) {
                dynTableDeleteRow(x);
            }
        }
    }
    function insert_row(tableid, elem) {
        checkInsertValue = 0;
        var x = dynTableRow(elem);
        dynTableCloneRow(tableid, x);
        var table = document.getElementById('dyn_table');
        var table_length = table.rows.length;
        for (var i = 0; i < table_length - 1; i++) {
            var serv = dynTableGetNodeInRow(table.rows[i + 1], 'serviceName').value;
            var serviceRID = dynTableGetNodeInRow(table.rows[i + 1], 'serviceRID').value;
            if (serviceRID == "") {
                checkInsertValue = 1;
                if (checkInsertValue == 0) {
                    alert("Enter Service Name Correctly");
                }

                dynTableGetNodeInRow(table.rows[i + 1], 'serviceName').value = "";
//                dynTableGetNodeInRow(table.rows[i + 1], 'qtyService').value = "";
                dynTableGetNodeInRow(table.rows[i + 1], 'MRP').value = "";
                dynTableGetNodeInRow(table.rows[i + 1], 'netAmount').value = "";
                return false;
            }
            var Qty = dynTableGetNodeInRow(table.rows[i + 1], 'qtyService').value;
        }
        if (serv == "") {
            alert("Enter Service Name");
            return false;
        } else if (Qty == "") {
            alert("Enter Qty");
        } else {
            var newRow = dynTableAppendRow(tableid);
            dynTableGetNodeInRow(newRow, "soDel").className = "fa fa-minus";
            dynTableGetNodeInRow(newRow, "serviceName").value = "";
            dynTableGetNodeInRow(newRow, "qtyService").value = 1;
            dynTableGetNodeInRow(newRow, "serviceDisc").value = "";
            dynTableGetNodeInRow(newRow, "serviceRID").value = '0';
            dynTableGetNodeInRow(newRow, "bdGroupRID").value = '0';
            dynTableGetNodeInRow(newRow, "netAmount").value = "";
            dynTableGetNodeInRow(newRow, 'MRP').value = 0.00;
            dcomethealth.Patient.autocompleteService();
        }
    }
    function insertRow(tableid, elem) {
        var x = dynTableRow(elem);
        dynTableCloneRow(tableid, x);
        var table = document.getElementById('kinTable');
        var table_length = table.rows.length;
        for (var i = 0; i < table_length - 1; i++) {
            var kinName = dynTableGetNodeInRow(table.rows[i + 1], 'kinName').value;
            var kinMobileNo = dynTableGetNodeInRow(table.rows[i + 1], 'kinMobileNo').value;
        }
        if (kinName == "") {
            alert("Enter Name");
            return false;
        } else if (kinMobileNo == "") {
            alert("Enter Mobile Number");
        } else {
            var newRow = dynTableAppendRow(tableid);
            dynTableGetNodeInRow(newRow, "kinDetailsDel").className = "fa fa-minus";
            dynTableGetNodeInRow(newRow, "kinRid").value = "";
            dynTableGetNodeInRow(newRow, "kinName").value = "";
            dynTableGetNodeInRow(newRow, "kinMobileNo").value = "";
            dynTableGetNodeInRow(newRow, "kinOccupation").value = "";
            dynTableGetNodeInRow(newRow, "kinRelationship").innerHTML = "";
            dynTableGetNodeInRow(newRow, "kinRelationship").className = "dcomet-c-s_ddict_relationship_type-list form-control col-md-12 col-sm-10 col-xs-12";
            dcomethealth.datatypes.init($("#Patient"));
            $("select option").each(function () { //For remove duplicates
                $(this).siblings("[value='" + this.value + "']").remove();
            });
        }
    }
    function ClearName(row) {
        if (dynTableGetNodeInRow(row, 'serviceName').value == "") {
            dynTableGetNodeInRow(row, 'serviceRID').value = 0;
            delete_row(row)
        }
    }
    function eligibleAmountCalculation() {
        if (!!$("#serviceNetAmount").val()) {
            if ($("#bhEligibleAmount").val().match("%")) {
                var amt = $("#bhEligibleAmount").val().replace('%', '');
                $("#bhEligibleAmount").val('');
                var amtVal = parseFloat($("#serviceNetAmount").val()) * (parseFloat(amt) / 100);
                if (amt > 100) {
                    alert("Enter the valid percent");
                    $("#bhEligibleAmount").val('');
                    calculation();
                    return false;
                }
                $("#bhEligibleAmount").val(amtVal.toFixed(2));
                calculation();
            } else {
                if (parseFloat($("#bhEligibleAmount").val()) > parseFloat($("#serviceNetAmount").val())) {
                    alert('Eligible amount is greater than Net Amount');
                    $("#bhEligibleAmount").val("");
                    calculation();
                } else {
                    calculation();
                }
            }
        }
    }
    function calculation() {
        var check = false, checkCostPrice = 0;
        var gross = 0, net = 0, disc_total = 0, tax_total = 0, serv_tax_total = 0;
        var table = document.getElementById('dyn_table');
        var table_length = table.rows.length;
        var eligibleAmt = parseFloat($("#bhEligibleAmount").val());
        var due = 0;
        for (var i = 0; i < table_length - 1; i++) {
            var item_name = dynTableGetNodeInRow(table.rows[i + 1], 'serviceName').value;
            var qty_row = dynTableGetNodeInRow(table.rows[i + 1], 'qtyService').value;
            var mrp = dynTableGetNodeInRow(table.rows[i + 1], 'MRP').value;
            var serviceDisc = dynTableGetNodeInRow(table.rows[i + 1], 'serviceDisc').value;
            if (qty_row == '') {
                qty_row = 0;
            }
            if (serviceDisc == '') {
                serviceDisc = 0;
            }
            if (serviceDisc > 100) {
                alert("Enter the valid percent");
                dynTableGetNodeInRow(table.rows[i + 1], 'serviceDisc').value = 0;
                dynTableGetNodeInRow(table.rows[i + 1], 'serviceDisc').focus();
                dynTableGetNodeInRow(table.rows[i + 1], 'netAmount').value = parseFloat(mrp) * parseFloat(qty_row);
                return false;
            }
            if (!!item_name) {
                if (mrp == '') {
                    check = true;
                    mrp = "";
                }
            }
            var gross_row = parseFloat(qty_row) * parseFloat(mrp);
            var disc_calc = 0;
            if (serviceDisc == "" || parseFloat(serviceDisc) == 0) {
            } else {
                disc_calc = parseFloat(gross_row) * (parseFloat(serviceDisc) / 100)
            }
            disc_total = parseFloat(disc_total) + parseFloat(disc_calc);
            gross = parseFloat(gross) + parseFloat(gross_row);
            var net_row = parseFloat(gross_row) - parseFloat(disc_calc);
            dynTableGetNodeInRow(table.rows[i + 1], 'netAmount').value = net_row.toFixed(2);
            net = parseFloat(net) + parseFloat(net_row);
            var netRound = parseInt(net.toFixed(0)) - parseFloat(net);

            if (dynTableGetNodeInRow(table.rows[i + 1], 'netAmount').value == "NaN") {
                dynTableGetNodeInRow(table.rows[i + 1], 'netAmount').value = "";
//                dynTableGetNodeInRow(table.rows[i + 1], 'serviceName').value = "";
            }
            var dueRound = parseInt(due.toFixed(0)) - parseFloat(due);
            var round = netRound + dueRound;
            due = net - eligibleAmt;
        }

        if (gross.toString() === "NaN") {
            document.getElementById('serviceGrossAmount').value = "";
        } else {
            document.getElementById('serviceGrossAmount').value = gross.toFixed(2);
        }
        if (disc_total.toString() === "NaN") {
            document.getElementById('serviceDiscountAmount').value = "";
        } else {
            document.getElementById('serviceDiscountAmount').value = disc_total.toFixed(2);
        }
        if (round.toString() === "NaN") {
            document.getElementById('round_off_amount').value = "";
        } else {
            document.getElementById('round_off_amount').value = round.toFixed(2);
        }
        if (net.toString() === "NaN") {
            document.getElementById('serviceNetAmount').value = "";
        } else {
            document.getElementById('serviceNetAmount').value = net.toFixed(0);
        }
//        if (!$("#eligibleAmtDiv").hasClass('hidden')) {
//            if (due.toString() === "NaN") {
//                document.getElementById('pmd_amount').value = "";
//                document.getElementById('total_pmd').value = "";
//            } else {
//                document.getElementById('pmd_amount').value = due.toFixed(0);
//                document.getElementById('total_pmd').value = due.toFixed(0);
//            }
//        } else {
//            if (net.toString() === "NaN") {
//                document.getElementById('pmd_amount').value = "";
//                document.getElementById('total_pmd').value = "";
//            } else {
//                document.getElementById('pmd_amount').value = net.toFixed(0);
//                document.getElementById('total_pmd').value = net.toFixed(0);
//            }
//        }
        if (due.toString() === "NaN") {
            document.getElementById('serviceDueAmount').value = "";
        } else {
            document.getElementById('serviceDueAmount').value = due.toFixed(2);
        }
        if (eligibleAmt.toString() === "NaN") {
            document.getElementById('serviceEligibleAmount').value = "";
        } else {
            document.getElementById('serviceEligibleAmount').value = eligibleAmt;
        }
        if (check == true && checkCostPrice == 0 && checkMinusCostPrice != 1) {
            checkCostPrice = 1;
            checkMinusCostPrice = 0;
            alert('Enter Cost Price');
            return false;
        }
        checkMinusCostPrice = 0;
    }
    function insertRowPay(id, elem) {
        var table = document.getElementById('pmd_table');
        var table_length = table.rows.length;
        if (dynTableGetNodeInRow(elem, 'pmd_amount').value == "" || dynTableGetNodeInRow(elem, 'pmd_amount').value == 0) {
            alert("Enter Amount");
            return false;
        }
        var total = 0;
        for (var i = 0; i < table_length; i++) {
            total = total + dynTableGetNodeInRow(table.rows[i], 'pmd_amount').value;
        }
        if (total != "" && parseInt(total) != 0) {
            var x = dynTableRow(elem);
            dynTableCloneRow(id, x);
            var newRow = dynTableAppendRow(id);
            dynTableGetNodeInRow(newRow, "pmd_amount").value = 0;
            dynTableGetNodeInRow(newRow, "cheqno").className = "col-md-12 hidden";
            dynTableGetNodeInRow(newRow, "bankname").className = "col-md-12 hidden";
            dynTableGetNodeInRow(newRow, "cheqdate").className = "col-md-12 hidden";
            dynTableGetNodeInRow(newRow, "branchname").className = "col-md-12 hidden";
            dynTableGetNodeInRow(newRow, "cardtype").className = "col-md-12 hidden";
            dynTableGetNodeInRow(newRow, "approvalno").className = "col-md-12 hidden";
            dynTableGetNodeInRow(newRow, "cardno").className = "col-md-12 hidden";
            dynTableGetNodeInRow(newRow, "expdate").className = "col-md-12 hidden";
            dynTableGetNodeInRow(newRow, "mobileno").className = "col-md-12 hidden";
            dynTableGetNodeInRow(newRow, "approvalno").value = "";
            dynTableGetNodeInRow(newRow, "bankname").value = "";
            dynTableGetNodeInRow(newRow, "cardno").value = "";
            dynTableGetNodeInRow(newRow, "expdate").value = "";
            dynTableGetNodeInRow(newRow, "mobileno").value = "";
            dynTableGetNodeInRow(newRow, "cheqno").value = "";
            dynTableGetNodeInRow(newRow, "cheqdate").value = "";
            dynTableGetNodeInRow(newRow, "branchname").value = "";
            dynTableGetNodeInRow(newRow, "del").className = 'ace-icon fa fa-minus';
        } else {
            alert("Enter Service Name");
            return false;
        }
    }
    function deleterowPay(elem) {
        var x = dynTableRow(elem);
        dynTableDeleteRow(x);
        pmdPaid();
    }
    function pmdPaid() {
        var checkvalue = 0
        var tab_id = document.getElementById('pmd_table');
        var tab_length = tab_id.rows.length;
        var pmd_amount = dynTableGetNodeInRow(tab_id.rows[tab_length - 1], 'pmd_amount').value;
        if (pmd_amount == 0) {
            if (checkvalue == 0) {
                checkvalue = 1;
                alert("Enter Amount");
                setTimeout(function () {
                    dynTableGetNodeInRow(tab_id.rows[tab_length - 1], 'pmd_amount').focus();
                }, 1);
            }
        }
        var table = document.getElementById('pmd_table');
        var table_length = table.rows.length;
        var pmd_amount_c = 0;
        var pmd_amount1 = 0;
        for (var i = 0; i < table_length; i++) {
            pmd_amount1 = dynTableGetNodeInRow(table.rows[i], 'pmd_amount').value;
            var curRid = dynTableGetNodeInRow(table.rows[i], 'pay_mode_currency').value;
            if (curRid != dcomethealth.sCurrencyRid) {
                $.each(currencyExchange, function (idx, cur) {
                    if (cur.cerDispCurRid == curRid) {
                        pmd_amount1 = dynTableGetNodeInRow(table.rows[i], 'pmd_amount').value * cur.cerBaseToDispFactor;
                        pmd_amount_c = parseInt(pmd_amount_c) + parseInt(pmd_amount1);
                    }
                });
            } else {
                pmd_amount_c = parseInt(pmd_amount_c) + parseInt(pmd_amount1);
            }
        }
        if (pmd_amount_c.toString() == 'NaN') {
            document.getElementById('total_pmd').value = "";
        } else {
            document.getElementById('total_pmd').value = pmd_amount_c.toFixed(2);
        }
    }
    function openMLC() {
        var zero = document.getElementById('openMLC');
        if (zero.checked) {
            document.getElementById('isMLC').value = 1;
        } else {
            document.getElementById('isMLC').value = 0;
        }
    }
    function openRefName() {
        if ($('#refType option:selected').text() != 'Self') {
            $("#refName").removeClass("col-md-3 col-sm-4 col-xs-8 hidden").addClass("col-md-3 col-sm-4 col-xs-8");
        } else {
            $("#refName").removeClass("col-md-3 col-sm-4 col-xs-8").addClass("col-md-3 col-sm-4 col-xs-8 hidden");
        }
    }
    function openEmgInfo() {
        if ($('#visitReason option:selected').text() == 'Emergency') {
            $("#emgInfo").removeClass("hidden").addClass("col-md-12");
        } else {
            $("#emgInfo").removeClass("col-md-12").addClass("hidden");
        }
    }

    function openAdmissionInfo() {
        if ($('#visitReason option:selected').text() == 'Admission') {
            $("#bedReg").removeClass("hidden").addClass("col-md-12");
            $("#kinDiv").removeClass("hidden");
            $("#serviceOrder").hide();
            $("#paymentDiv").hide();
        } else {
            $("#bedReg").addClass("hidden").addClass("col-md-12");
            $("#serviceOrder").show();
            $("#paymentDiv").show();
        }
    }
    function viewBed() {
        if (parseInt($('#roomType').val()) != 0) {
            $("#helpModel").modal('show');
        }
    }

    function div_hide() {
        dcomethealth.Patient.getStates();
        $("#RegistrationHeader").removeClass("panel panel-primary").addClass("hidden");
        $("#addNew").removeClass("hidden").addClass("panel panel-primary");
        $("#reset").removeClass("hidden");
    }
    function clear_values() {
        dcomethealth.util.loadpage('Patient');
        dcomethealth.util.base_init();
        dcomethealth.searchPatByAppointments = -1;
        $("#reset").removeClass("hidden");
        $("#RegistrationHeader").removeClass("panel panel-primary").addClass("hidden");
        $("#addNew").removeClass("hidden").addClass("panel panel-primary");
    }
    function calculateDOB() {
        var year = new Date().getFullYear();
        var month = new Date().getMonth();
        var day = new Date().getDate();
        if (!isNaN($('#patAge').val())) {
            year = year - $('#patAge').val();
            $('#patDOB').val(day + "-" + (month + 1) + "-" + year);
            dateOfBirthValidation();
        }
    }
    function calculateAge() {
        if (!!$('#patDOB').val()) {
            var c = $('#patDOB').val().split('-');
            if (dateOfBirthValidation()) {
                var age = Math.floor((new Date() - new Date(new Date(c[2], c[1] - 1, c[0]))) / (365.25 * 24 * 60 * 60 * 1000));
                if (!isNaN(age)) {
                    $('#patAge').val(age);
                }
            }
        }
    }
    function dateOfBirthValidation() {
        var a = moment();
        var b = moment($("#patDOB").val(), 'DD-MM-YYYY');
        if (a.isBefore(b)) {
            alert("Enter Valid date");
            $("#patDOB").val("");
            $("#patAge").val("");
            return false;
        } else {
            return true;
        }
    }
    function tabKeyPress(e, event) {
        var keyCode = event.keyCode || event.which;
        if (keyCode == 9) {
            insert_row('dyn_table', e)
        }
    }
    function serviceCheck(elem) {
        if (dynTableGetNodeInRow(elem, 'serviceRID').value == "" || dynTableGetNodeInRow(elem, 'serviceRID').value == 0) {
            alert("Enter Service Name");
            dynTableGetNodeInRow(elem, 'serviceDisc').value == "";
            dynTableGetNodeInRow(elem, 'MRP').value == "";
        } else {
            calculation();
        }
    }
    function openCardInfo(elem) {
        if (dynTableGetNodeInRow(elem, 'pay_mode_ddict').options.item(dynTableGetNodeInRow(elem, 'pay_mode_ddict').selectedIndex).text == 'Card') {
            dynTableGetNodeInRow(elem, "cheqno").className = "col-md-12 hidden";
            dynTableGetNodeInRow(elem, "cheqno").value = "";
            dynTableGetNodeInRow(elem, "bankname").className = "col-md-12";
            dynTableGetNodeInRow(elem, "cheqdate").className = "col-md-12 hidden";
            dynTableGetNodeInRow(elem, "cheqdate").value = "";
            dynTableGetNodeInRow(elem, "branchname").className = "col-md-12 hidden";
            dynTableGetNodeInRow(elem, "branchname").value = "";
            dynTableGetNodeInRow(elem, "mobileno").className = "col-md-12 hidden";
            dynTableGetNodeInRow(elem, "mobileno").value = "";
            dynTableGetNodeInRow(elem, "cardtype").className = "col-md-12";
            dynTableGetNodeInRow(elem, "approvalno").className = "col-md-12";
            dynTableGetNodeInRow(elem, "cardno").className = "col-md-12";
            dynTableGetNodeInRow(elem, "expdate").className = "col-md-12";
        }
        else if (dynTableGetNodeInRow(elem, 'pay_mode_ddict').options.item(dynTableGetNodeInRow(elem, 'pay_mode_ddict').selectedIndex).text == 'Cheque') {
            dynTableGetNodeInRow(elem, "cheqno").className = "col-md-12";
            dynTableGetNodeInRow(elem, "bankname").className = "col-md-12";
            dynTableGetNodeInRow(elem, "cheqdate").className = "col-md-12";
            dynTableGetNodeInRow(elem, "branchname").className = "col-md-12";
            dynTableGetNodeInRow(elem, "mobileno").className = "col-md-12 hidden";
            dynTableGetNodeInRow(elem, "mobileno").value = "";
            dynTableGetNodeInRow(elem, "expdate").className = "col-md-12 hidden";
            dynTableGetNodeInRow(elem, "expdate").value = "";
            dynTableGetNodeInRow(elem, "cardtype").className = "col-md-12 hidden";
            dynTableGetNodeInRow(elem, "cardtype").value = "";
            dynTableGetNodeInRow(elem, "approvalno").className = "col-md-12 hidden";
            dynTableGetNodeInRow(elem, "approvalno").value = "";
            dynTableGetNodeInRow(elem, "cardno").className = "col-md-12 hidden";
            dynTableGetNodeInRow(elem, "cardno").value = "";
        }
        else if (dynTableGetNodeInRow(elem, 'pay_mode_ddict').options.item(dynTableGetNodeInRow(elem, 'pay_mode_ddict').selectedIndex).text == 'M-pesa') {
            dynTableGetNodeInRow(elem, "cheqno").className = "col-md-12 hidden";
            dynTableGetNodeInRow(elem, "cheqno").value = "";
            dynTableGetNodeInRow(elem, "bankname").className = "col-md-12 hidden";
            dynTableGetNodeInRow(elem, "bankname").value = "";
            dynTableGetNodeInRow(elem, "cheqdate").className = "col-md-12 hidden";
            dynTableGetNodeInRow(elem, "cheqdate").value = "";
            dynTableGetNodeInRow(elem, "branchname").className = "col-md-12 hidden";
            dynTableGetNodeInRow(elem, "branchname").value = "";
            dynTableGetNodeInRow(elem, "expdate").className = "col-md-12 hidden";
            dynTableGetNodeInRow(elem, "expdate").value = "";
            dynTableGetNodeInRow(elem, "cardtype").className = "col-md-12 hidden";
            dynTableGetNodeInRow(elem, "cardtype").value = "";
            dynTableGetNodeInRow(elem, "approvalno").className = "col-md-12 hidden";
            dynTableGetNodeInRow(elem, "approvalno").value = "";
            dynTableGetNodeInRow(elem, "cardno").className = "col-md-12 hidden";
            dynTableGetNodeInRow(elem, "cardno").value = "";
            dynTableGetNodeInRow(elem, "mobileno").className = "col-md-12";
        } else {
            dynTableGetNodeInRow(elem, "cheqno").className = "col-md-12 hidden";
            dynTableGetNodeInRow(elem, "cheqno").value = "";
            dynTableGetNodeInRow(elem, "bankname").className = "col-md-12 hidden";
            dynTableGetNodeInRow(elem, "bankname").value = "";
            dynTableGetNodeInRow(elem, "cheqdate").className = "col-md-12 hidden";
            dynTableGetNodeInRow(elem, "cheqdate").value = "";
            dynTableGetNodeInRow(elem, "branchname").className = "col-md-12 hidden";
            dynTableGetNodeInRow(elem, "branchname").value = "";
            dynTableGetNodeInRow(elem, "cardtype").className = "col-md-12 hidden";
            dynTableGetNodeInRow(elem, "cardtype").value = "";
            dynTableGetNodeInRow(elem, "approvalno").className = "col-md-12 hidden";
            dynTableGetNodeInRow(elem, "approvalno").value = "";
            dynTableGetNodeInRow(elem, "cardno").className = "col-md-12 hidden";
            dynTableGetNodeInRow(elem, "cardno").value = "";
            dynTableGetNodeInRow(elem, "expdate").className = "col-md-12 hidden";
            dynTableGetNodeInRow(elem, "expdate").value = "";
            dynTableGetNodeInRow(elem, "mobileno").className = "col-md-12 hidden";
            dynTableGetNodeInRow(elem, "mobileno").value = "";
        }
    }

//    function openCardInfo() {
//        var tab_id = document.getElementById('pmd_table');
//        var tab_length = tab_id.rows.length;
//        var val = dynTableGetNodeInRow(tab_id.rows[tab_length - 1], 'pay_mode_ddict').value;
//        if (dynTableGetNodeInRow(tab_id.rows[tab_length - 1], 'pay_mode_ddict').options.item(dynTableGetNodeInRow(tab_id.rows[tab_length - 1], 'pay_mode_ddict').selectedIndex).text == 'Card') {
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "cheqno").className = "col-md-12 hidden";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "bankname").className = "col-md-12";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "cheqdate").className = "col-md-12 hidden";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "branchname").className = "col-md-12 hidden";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "mobileno").className = "col-md-12 hidden";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "cardtype").className = "col-md-12";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "approvalno").className = "col-md-12";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "cardno").className = "col-md-12";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "expdate").className = "col-md-12";
//        }
//        else if (dynTableGetNodeInRow(tab_id.rows[tab_length - 1], 'pay_mode_ddict').options.item(dynTableGetNodeInRow(tab_id.rows[tab_length - 1], 'pay_mode_ddict').selectedIndex).text == 'Cheque') {
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "cheqno").className = "col-md-12";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "bankname").className = "col-md-12";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "cheqdate").className = "col-md-12";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "branchname").className = "col-md-12";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "mobileno").className = "col-md-12 hidden";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "expdate").className = "col-md-12 hidden";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "cardtype").className = "col-md-12 hidden";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "approvalno").className = "col-md-12 hidden";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "cardno").className = "col-md-12 hidden";
//        }
//        else if (dynTableGetNodeInRow(tab_id.rows[tab_length - 1], 'pay_mode_ddict').options.item(dynTableGetNodeInRow(tab_id.rows[tab_length - 1], 'pay_mode_ddict').selectedIndex).text == 'M-pesa') {
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "cheqno").className = "col-md-12 hidden";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "bankname").className = "col-md-12 hidden";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "cheqdate").className = "col-md-12 hidden";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "branchname").className = "col-md-12 hidden";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "expdate").className = "col-md-12 hidden";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "cardtype").className = "col-md-12 hidden";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "approvalno").className = "col-md-12 hidden";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "cardno").className = "col-md-12 hidden";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "mobileno").className = "col-md-12";
//        } else {
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "cheqno").className = "col-md-12 hidden";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "bankname").className = "col-md-12 hidden";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "cheqdate").className = "col-md-12 hidden";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "branchname").className = "col-md-12 hidden";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "cardtype").className = "col-md-12 hidden";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "approvalno").className = "col-md-12 hidden";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "cardno").className = "col-md-12 hidden";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "expdate").className = "col-md-12 hidden";
//            dynTableGetNodeInRow(tab_id.rows[tab_length - 1], "mobileno").className = "col-md-12 hidden";
//        }
//    }
    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
                $('#patImage').attr('src', e.target.result);
            }
            reader.readAsDataURL(input.files[0]);
        }
        var files = input.files || input.files[0];
        var isValidExtension = dcomethealth.Pictures.isAllowedImageExtenstionList(files);
        var isValidFileSize = dcomethealth.Pictures.isAllowedFileSize(files);
        if (isValidExtension && isValidFileSize) {
            dcomethealth.Pictures.uploadFiles(files, "patImage", 0);
        }
    }

    $("#imgInp").change(function () {
        readURL(this);
    });

</script>
<style>
    .aTag{
        text-decoration: none;
        color: #E57373 !important;
        font-weight: bolder !important;
    }
    .aTag:hover{
        color: #546e7a;
    }
    .bedCard {
        width: 20%;
    }
    .bedCard:hover {
        border-top: 2px solid #546e7a;
        border-bottom: 2px solid #546e7a;
        /*box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);*/
        box-shadow:0 1px 4px rgba(0, 0, 0, 0.3), 0 0 40px rgba(0, 0, 0, 0.1) inset;
    }
    .bedOccupied{
        width: 20%;
        background-color: #4dd0e1;
        /*background-color: #FFC6AA;*/
    }
    .bedOccupied:hover {
        border-top: 2px solid #546e7a;
        border-bottom: 2px solid #546e7a;
        box-shadow:0 1px 4px rgba(0, 0, 0, 0.3), 0 0 40px rgba(0, 0, 0, 0.1) inset;
    }
    .badgeColor{
        background-color: #4dd0e1 !important;
    } 
</style>
<link rel='stylesheet' type='text/css' href='js/plugins/datatables/dataTables.css'/>
<link rel="stylesheet" type='text/css' href="pages/css/pictures.css">
<div class="" id="PatientInfo">     
    <div id="RegistrationHeader" class="panel panel-primary">
        <div class="panel-heading"><h4>Registration</h4>
            <div class="hidden-print">
                <div class="pull-right edit-all-button-container">
                    <button class="btn btn-primary" id="patientRange" style="margin-top: 3px; margin-bottom: 3px;"><span class="hidden-xs hidden-sm" id="patientRangeSpan"></span> <b class="caret"></b>
                    </button>
                    <a href="#" class="btn btn-primary" onclick="div_hide()" style="margin-top: 3px; margin-bottom: 3px;"><span id="savePage4Form" >Add New</span></a>
                </div>
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col-md-12">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <div class="form-group col-md-12 col-sm-12 col-xs-12">
                            <div id="patientFooter">
                                <table id="tab_patient_details" width="100%" border="0" cellspacing="0" class="table table-striped table-bordered">
                                    <thead>
                                        <tr>
                                            <th>
                                                UHID
                                            </th>
                                            <th>
                                                Patient Name
                                            </th>
                                            <th>
                                                Mobile No
                                            </th>
                                            <th align="right"></th>
                                        </tr>
                                    </thead>            
                                    <tbody id="patient_Table">
                                    </tbody> 
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="addNew" class="hidden panel panel-primary">
        <form action="#" id="edit_user_form" name="edit_user_form" novalidate="novalidate" class="form-horizontal row-border">
            <div class="panel-heading"><h4>Registration</h4>
                <div class="hidden-print">
                    <div class="edit-all-button-container pull-right" id="btns_state">
                        <input type="reset" id="reset" class="btn btn-primary" style="margin-top: 3px; margin-bottom: 3px;" onclick="clear_values()" value="Clear"/>
                        <a href="#" class="btn btn-primary" onclick="dcomethealth.util.loadpage('Patient');
                                dcomethealth.util.base_init()" style="margin-top: 3px; margin-bottom: 3px;"><span id="savePage4Form">Back</span></a>
                        <input type="submit" id="saveSubmit" class="btn btn-primary" value="Save" style="margin-top: 3px; margin-bottom: 3px;"/>                        
                    </div>
                </div>
            </div>
            <br>
            <div class="panel panel-default">
                <div class="panel-body col-md-12 col-sm-12 col-xs-12">
                    <div class="row col-md-5 col-sm-5 col-xs-5">
                        <input id="mrnSearch" type="text" name="mrnSearch" class="col-md-5 col-sm-5 col-xs-5 form-control" onchange="dcomethealth.Patient.freeConsultationCheck()" placeholder="UHID / Mobile No." />
                        <input type="hidden" id="patRid" name="patRid"/>
                        <input type="hidden" id="billHRid" name="billHRid"/>
                        <input type="hidden" id="visitRid" name="visitRid"/>
                        <input type="hidden" id="kinId" name="kinId"/>
                        <input type="hidden" id="fcCurrentState" name="fcCurrentState"/>
                        <input type="hidden" id="freeConPatDocMappingRid" name="freeConPatDocMappingRid"/>
                    </div>
                    <div class="col-md-4 col-sm-4 col-xs-4">
                        <div id="lvDateLi"  class="col-md-12 col-sm-12 col-xs-12 hidden">
                            <span  class="row col-md-12 col-sm-12 col-xs-12">Registered Date </span>
                            <span id="lastVDate" class="row text-primary col-md-12 col-sm-12 col-xs-12"></span>
                        </div>
                    </div>                    
                    <div class="col-md-3 col-sm-3 col-xs-3 pull-right">
                        <div class="col-md-12 col-sm-12 col-xs-12">
                            <span style="float:left;" class="row col-md-12 col-sm-12 col-xs-12">Date</span>
                            <span id="curDate" class="row text-primary col-md-12 col-sm-12 col-xs-12"></span>
                        </div> 
                    </div>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-body col-md-12 col-sm-12 col-xs-12">
                    <div class="row col-md-12 col-sm-12 col-xs-12">

                        <div class="row col-md-9 col-sm-9 col-xs-9">                          
                            <div class="row col-md-4 col-sm-4 col-xs-4"> 
                                <div class="input-group unity-input">
                                    <label class="row col-md-12 col-sm-12 col-xs-12">First & Middle Name</label>     
                                    <div class="row col-md-5 col-sm-4 col-xs-8">     
                                        <span class="row input-group-btn">
                                            <select id="patTitle" name="patTitle" class="input-group-addon dcomet-c-s_ddict_title-list jqueryUIToolTip form-control" onchange="dcomethealth.Patient.genderChange()" title="Title">
                                            </select>
                                        </span>
                                    </div>
                                    <div class="row col-md-8 col-sm-8 col-xs-12">                                    
                                        <input type="text"  class=" form-control" id="patName" data-number name="patName" onkeypress="return dcomethealth.validation.ValidateAlpha(event)"/>
                                        <input type = "hidden" id="update" value="0"/>
                                    </div>
                                </div>                                
                            </div>
                            <div class="row col-md-4 col-sm-4 col-xs-4">
                                <label class="row col-md-12 col-sm-12 col-xs-12">Last Name</label> 
                                <div class="row col-md-12 col-sm-12 col-xs-12">
                                    <input type="text" id="LName" name="LName" onkeypress=" return dcomethealth.validation.ValidateAlpha(event)" class="form-control"/>
                                </div>
                            </div>   
                            <div class="row col-md-4 col-sm-4 col-xs-4">
                                <div class="row col-md-7 col-sm-7 col-xs-7">
                                    <label class="row col-md-12 col-sm-12 col-xs-12">DOB</label>
                                    <input class="form-control jqueryUIToolTip col-md-12 col-sm-12 col-xs-12" title="DD-MM-YYYY Format" type="text" id="patDOB" name="patDOB" maxlength="10" onkeypress="return dcomethealth.validation.ValidateDateEntry(event)" onblur="calculateAge()"/>
                                </div> 
                                <div class="col-md-1 col-sm-1 col-xs-1"></div>
                                <div class="col-md-4 col-sm-4 col-xs-4">
                                    <label class="row col-md-12 col-sm-12 col-xs-12">Age</label>  
                                    <input style="" class="form-control col-md-12 col-sm-12 col-xs-12 jqueryUIToolTip" type="text" id="patAge" name="patAge" onkeypress="return dcomethealth.validation.isNumberKey(event)" maxlength="3" onblur="calculateDOB()" onchange="calculateDOB()" title="Age" />
                                    <input type="hidden" id="patRID" name="patRID"/>  
                                </div>
                            </div>                            
                            <div class="row col-md-4 col-sm-4 col-xs-4">
                                <label class="row col-md-12 col-sm-12 col-xs-12">Gender</label>
                                <div class="row col-md-12 col-sm-12 col-xs-12">
                                    <select id="patGender" name="patGender" class="form-control dcomet-c-s_ddict_gender-list col-md-12 col-sm-12 col-xs-12">
                                    </select>
                                </div>
                            </div>    
                            <div class="row col-md-4 col-sm-4 col-xs-4">
                                <label class="row col-md-12 col-sm-12 col-xs-12">Marital Status</label>
                                <div  class="row col-md-12 col-sm-12 col-xs-12"> 
                                    <select id="patMaritalStatus" name="patMaritalStatus" class=" form-control dcomet-c-s_ddict_marital_status-list"> 
                                        <option></option>
                                    </select>
                                </div>
                            </div> 
                            <div id="countryDiv2" class="row col-md-4 col-sm-4 col-xs-4">
                                <label class="row col-md-12 col-sm-12 col-xs-12">Country</label>
                                <div class="row col-md-12 col-sm-12 col-xs-12">
                                    <input type="text" id="cntryName" name="cntryName" list="patCountry" onkeypress="return dcomethealth.validation.ValidateAlpha(event)" class="form-control" onblur="" onchange="dcomethealth.Patient.getStates()"/>
                                    <input type="hidden" id="countryCode"/>
                                    <datalist id="patCountry" class="dcomet-c-s_countries-list" style="display: none;"></datalist> 
                                </div>
                            </div>
                            <div class="row col-md-4 col-sm-4 col-xs-4">
                                <div class="input-group unity-input">
                                    <label class="row col-md-12 col-sm-12 col-xs-12">Mobile</label><br>
                                    <div class="row col-md-4 col-sm-5 col-xs-8">
                                        <span class="row input-group-btn"></span>
                                        <input type="text" id="prefixMobile" name="prefixMobile" class="form-control">
                                    </div>
                                    <div class="row col-md-9 col-sm-8 col-xs-12">
                                        <input type="text" id="patMobile" name="patMobile" onkeypress="return dcomethealth.validation.isNumberKey(event, this)" maxlength="20" class="form-control col-md-12 col-sm-12 col-xs-12"/>
                                    </div>
                                </div>                             
                            </div>
                            <div class="row col-md-4 col-sm-4 col-xs-4">
                                <label class="row col-md-12 col-sm-12 col-xs-12">Email</label><br>
                                <div class="row col-md-12 col-sm-12 col-xs-12">
                                    <input type="text" id="patEmail" name="patEmail" onchange="dcomethealth.validation.validateEmail(this);" class="form-control col-md-12 col-sm-12 col-xs-12"/>
                                </div>
                            </div>
                            <div id="bgDiv1" class="row col-md-4 col-sm-4 col-xs-4">
                                <label class="row col-md-12 col-sm-12 col-xs-12">Blood Group</label>
                                <div class="row col-md-12 col-sm-12 col-xs-12">
                                    <select id="patBldGrp" name="patBldGrp" class="dcomet-c-s_ddict_blood_group-list form-control">
                                        <option></option>
                                    </select>
                                </div>
                            </div>
                            <div id="bgDiv2" class="row col-md-4 col-sm-4 col-xs-4 hidden">
                                <label class="row col-md-12 col-sm-12 col-xs-12">Blood Group</label>
                                <div class="row col-md-12 col-sm-12 col-xs-12">
                                    <select id="patBldGrp" name="patBldGrp" class="dcomet-c-s_ddict_blood_group-list form-control">
                                        <option></option>
                                    </select>
                                </div>
                            </div>
                            <!--                        <div class="row col-md-4 col-sm-4 col-xs-4"></div>
                                                    <div class="row col-md-4 col-sm-4 col-xs-4"></div>
                            -->                        <div class="row col-md-12 col-sm-4 col-xs-4"><p></p></div>
                            <div id="state" class="row col-md-4 col-sm-4 col-xs-4">
                                <label class="row col-md-12 col-sm-12 col-xs-12">Province / State / County</label>
                                <div class="row col-md-12 col-sm-12 col-xs-12">
                                    <input type="hidden" id="State"/>
                                    <datalist id="patState" class="dcomet-c-s_states-list" style="display:none;"></datalist>
                                    <input id="stateGeo" type="text" list="patState" class="form-control dcomet-c-s_ddict_state-list col-md-12 col-sm-12 col-xs-12" onkeypress="return dcomethealth.validation.ValidateAlpha(event)"  onchange="dcomethealth.Patient.getCity()"/>
                                </div>
                            </div>
                            <!--                        <div id="county" class="row col-md-4 col-sm-4 col-xs-4 hidden">
                                    <label class="row col-md-12 col-sm-12 col-xs-12">County</label>
                                    <div class="row col-md-12 col-sm-12 col-xs-12">
                                        <input type="text" id="Country" name="Country" maxlength="20" class="form-control col-md-12 col-sm-12 col-xs-12"/>
                                    </div>
                                                    </div>-->

                            <div id="cty" class="row col-md-4 col-sm-4 col-xs-4">
                                <label class="row col-md-12 col-sm-12 col-xs-12">City / Town</label>
                                <div class="row col-md-12 col-sm-12 col-xs-12">
                                    <input type="hidden" id="City"/>
                                    <datalist id="Cities" class="dcomet-c-s_cities-list" style="display: none;"></datalist>
                                    <input id="patCity" name="patCity" type="text" list="Cities" class="form-control dcomet-c-s_ddict_city-list col-md-12 col-sm-12 col-xs-12" onkeypress="return dcomethealth.validation.ValidateAlpha(event)"/>                                    
                                </div>
                            </div>
                            <!--                        <div id="town" class="row col-md-4 col-sm-4 col-xs-4 hidden">
                                                        <label class="row col-md-12 col-sm-12 col-xs-12">Town</label>
                                    <div class="row col-md-12 col-sm-12 col-xs-12">
                                        <input type="hidden" id="City"/>
                                        <datalist id="Cities" class="dcomet-c-s_cities-list" style="display: none;"></datalist>
                                        <input id="patCity" name="patCity" type="text" list="Cities" class="form-control dcomet-c-s_ddict_city-list col-md-12 col-sm-12 col-xs-12"/>                                    
                                    </div>
                                                    </div>-->
                            <div id="zipcode" class="row col-md-4 col-sm-4 col-xs-4">
                                <label class="row col-md-12 col-sm-12 col-xs-12">Zip Code / Postal Code</label>
                                <div class="row col-md-12 col-sm-12 col-xs-12">
                                    <input type="text" id="pinCode" name="pinCode" maxlength="20" onkeypress="return dcomethealth.validation.isNumberKey(event, this)" class="form-control col-md-12 col-sm-12 col-xs-12" onchange="dcomethealth.Patient.searchPostalCode()"/>
                                </div>
                            </div>
                            <!--                        <div id="postal" class="row col-md-4 col-sm-4 col-xs-4 hidden">
                                                        <label class="row col-md-12 col-sm-12 col-xs-12">Postal Code</label>
                            <div class="row col-md-12 col-sm-12 col-xs-12">
                                                            <input type="text" id="postCode" name="postCode" maxlength="20" onkeypress="return dcomethealth.validation.isNumberKey(event, this)" class="form-control col-md-12 col-sm-12 col-xs-12" onchange="dcomethealth.Patient.searchPostalCode()"/>
                                                        </div>
                                                    </div> -->

                            <div class="row col-md-6 col-sm-6 col-xs-12">
                                <label class="row col-md-12 col-sm-12 col-xs-12">Address</label>
                                <div class="row col-md-12 col-sm-12 col-xs-12">
                                    <textarea id="patAddress" name="patAddress" maxlength="100" class="col-md-12 col-sm-12 col-xs-12"></textarea>
                                </div>
                            </div>                        
                            <div class="row col-md-3 col-sm-3 col-xs-3">
                                <div class="col-md-4 col-sm-4 col-xs-4"></div>   
                                <label class="row col-md-6 col-sm-12 col-xs-12">Is VIP</label>
                                <div class="row col-md-offset-4 col-sm-8 col-xs-12 checkbox-switch">                                   
                                    <input id="openVip" class="row" name="openVip" type="checkbox" onclick="openVipStatus()"/>
                                    <label for="openVip" class="row label-success"></label>
                                    <input type="hidden" id="isVIP" name="isVIP" value="0"/>
                                </div>
                            </div>
                        </div>
                        <div class="row col-md-3 col-sm-3 col-xs-3"> 
                            <div class="row col-md-12">
                                <div class="row col-md-12">                                    
                                    <fieldset id="pictures">    
                                        <!--<img id="zoom_01" src='css/images/image1.png' data-zoom-image="css/images/image1.jpg" alt="Logo"/>-->
                                        <span class="col-md-12 col-sm-12 col-xs-12" style="text-align:justify;"><b><i>Drag and drop any image files to attach..</i></b></span>
                                        <input type='hidden' name="resourceId" id="resourceId" value="" />
                                        <div id="image_containerImg" class="" style="margin: auto;text-align:center;">
                                            <img id="patImage" class="ImgPlaceHolder ddplaceHolder " align="middle" style="width: 150px; height: 150px" />
                                        </div>                                        
                                    </fieldset>
                                </div>
                            </div> 
                            <div class="col-md-12 col-sm-12 col-xs-12">
                                <input type='file' id="imgInp" />
                                <!--<p>Capture Image: <input type="file" accept="image/*" id="capture" capture="camera"/> </p>-->
                            </div>

                        </div>

                    </div>
                    <!--                         <div class="col-md-12 col-sm-12 col-xs-12">
                                                <fieldset id="pictures" style="min-width: auto;">       
                                                    <span><b><i>Drag and drop any image files to attach..</i></b></span>
                                                    <input type='hidden' name="resourceId" id="resourceId" value="" />
                                                    <div id="image_containerImg" class=" ImgPlaceHolder ddplaceHolder col-md-12 col-sm-12 col-xs-12" style=""> 
                                                        <img id="patImage" class="row" style="width: 150px; height: 150px" />
                                                    </div>
                                                </fieldset>
                                            </div>-->
                    <!--<div class="col-md-3 col-sm-3 col-xs-3"></div>-->
                    <!--<div class="col-md-3 col-sm-3 col-xs-3"></div>--> 
                    <!--</div>-->
                    <div id="visitReasonDiv" class="row col-md-12 col-sm-12 col-xs-12">
                        <div class="row">
                            <div class="col-md-12 col-sm-12 col-xs-12">
                                <hr class="btn-danger">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12 col-sm-12 col-xs-12">
                                <span class="text-primary"><strong>Visit Reason</strong></span>
                            </div>
                        </div>
                        <div class="row col-md-12 col-sm-12 col-xs-12">
                            <div class="row col-md-3 col-sm-3 col-xs-6">
                                <label class="row col-md-12 col-sm-12 col-xs-12">Reason</label>
                                <div class="row col-md-12 col-sm-12 col-xs-12">
                                    <select class="dcomet-c-s_ddict_visit_reason-list jqueryUIToolTip form-control" onkeypress="return dcomethealth.validation.ValidateAlpha(event)" title="Visit Reason" id="visitReason" onchange="openEmgInfo()" onclick="openAdmissionInfo()">
                                        <option value="0"></option>
                                    </select>
                                </div>
                            </div>                                  
                            <div class="row col-md-3 col-sm-3 col-xs-6">
                                <label class="row col-md-12 col-sm-12 col-xs-12">Speciality</label>
                                <div class="row col-md-12 col-sm-12 col-xs-12">
                                    <select id="VDept" name="VDept" class="form-control dcomet-c-s_ddict_staff_speciality-list"><option value="0"></option></select>
                                </div>
                            </div>
                            <div class="row col-md-3 col-sm-3 col-xs-6">
                                <label class="row col-md-12 col-sm-12 col-xs-12">Doctor Name</label>
                                <div class="row col-md-12 col-sm-12 col-xs-12">
                                    <select id="VDName" name="VDName" class="form-control" onchange="dcomethealth.Patient.freeConsultationCheck()"><option value="0"></option></select>
                                    <input type="hidden" id="VDocRID" name="VDocRID" value="1"/>
                                    <input type="hidden" id="visitType" name="visitType" />
                                    <input type="hidden" id="visFreeConsultationMappingRid" name="visFreeConsultationMappingRid" />
                                </div>
                            </div>
                            <div class="row col-md-3 col-sm-3 col-xs-6">
                                <label class="row col-md-12 col-sm-12 col-xs-12">Referral Type</label>
                                <div class="row col-md-12 col-sm-12 col-xs-12">
                                    <select id="refType" class="dcomet-c-s_ddict_referrals_type-list jqueryUIToolTip form-control" title="Referral Type" onchange="openRefName()">
                                        <option></option>
                                    </select>
                                </div>
                            </div>
                            <div id="refName" class="row col-md-3 col-sm-3 col-xs-6 hidden">
                                <label class="row col-md-12 col-sm-12 col-xs-12">Referral Name</label>
                                <div class="row col-md-12 col-sm-12 col-xs-12">
                                    <input type="text" id="RName" name="RName" onkeypress="return dcomethealth.validation.ValidateAlpha(event)" class="form-control"/>
                                </div>
                            </div>     
                        </div>
                    </div>
                    <br>
                    <div id="emgInfo" class="row hidden">
                        <div class="row">
                            <div class="col-md-12 col-sm-12 col-xs-12">
                                <label class="text-primary"><strong>Emergency Info</strong></label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-2 col-sm-2 col-xs-8">
                                <label>Relationship</label>
                                <div>
                                    <select id="ERelation" class="dcomet-c-s_ddict_relationship_type-list jqueryUIToolTip col-md-12 col-sm-12 col-xs-12 form-control" title="Relation">
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-2 col-sm-2 col-xs-8">
                                <label>Name</label>
                                <div>
                                    <input type="text" id="EName" name="EName" onkeypress="return dcomethealth.validation.ValidateAlpha(event)" class="form-control col-md-12 col-sm-12 col-xs-12"/>
                                </div>
                            </div>
                            <div class="col-md-2 col-sm-2 col-xs-8">
                                <label>Contact No</label>
                                <div>
                                    <input type="text" id="EContact" maxlength="20" name="EContact" onkeypress="return dcomethealth.validation.isNumberKey(event, this)" class="form-control col-md-12 col-sm-12 col-xs-12"/>
                                </div>
                            </div>
                            <div class="col-md-2 col-sm-2 col-xs-8">
                                <label>Transport</label>
                                <div>
                                    <select class='dcomet-c-s_ddict_patient_transport-list jqueryUIToolTip col-md-12 col-sm-12 col-xs-12 form-control' title="Transport">
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-2 col-sm-2 col-xs-6">
                                <label></label>
                                <div>
                                    <input type="hidden" id="isMLC" name="isMLC" value="0"/>
                                    <input type="checkbox" id="openMLC" name="openMLC" onclick="openMLC()"/>
                                    <label>Is MLC</label>
                                </div>
                            </div>
                        </div>                        
                    </div>
                    <br>
                    <div id="payerDiv" class="row col-md-12 col-sm-12 col-xs-12">                        
                        <div class="row">
                            <div class="col-md-12 col-sm-12 col-xs-12">
                                <hr class="btn-danger">                                
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12 col-sm-12 col-xs-12">
                                <span class="text-primary"><strong>Payer Info</strong>                        
                            </div>
                        </div>
                        <div class="row col-md-12 col-sm-12 col-xs-12">
                            <div class=" row col-md-2 col-sm-3 col-xs-8">
                                <label>Type</label>
                                <div><select id="patRefType" name="patRefType" class=" form-control dcomet-c-s_ddict_payer_type-list jqueryUIToolTip col-md-12 col-sm-12 col-xs-12" title="Payer Type" onchange="dcomethealth.Patient.payerChange();"></select></div>
                            </div>
                            <div id="payerInfo" class="hidden"> 
                                <div class="col-md-2 col-sm-3 col-xs-8">
                                    <label>Payer Name</label>
                                    <div><select class="col-md-12 col-sm-12 col-xs-12 form-control" id="payerName" name="payerName" onchange="dcomethealth.Patient.payerNameChange();"></select></div>
                                </div>
                                <div id ="eAmountDiv" class="hidden col-md-2 col-sm-4 col-xs-8">
                                    <label>Eligible Amt/Percentage</label>
                                    <div><input class="col-md-12 form-control" id="bhEligibleAmount" onchange="eligibleAmountCalculation()" onkeypress="return dcomethealth.validation.isNumberKeyAndPercentage(event)" name="bhEligibleAmount"/></div>
                                </div>          
                                <div id ="approvalnoDiv" class="hidden col-md-2 col-sm-4 col-xs-8">
                                    <label>Approval Number</label>
                                    <div><input class="col-md-12 form-control" id="bhApprovalNo" name="bhApprovalNo"/></div>
                                </div> 
                                <!--                                <div class="col-md-2 col-sm-4 col-xs-8">
                                    <label>Plan:</label>
                                    <div><select class="col-md-12 form-control" id="payerPlan" name="payerPlan" ></select></div>
                                </div>
                                <div class="col-md-2 col-sm-4 col-xs-8">
                                    <label>Approval No:</label>
                                    <div><input type="text" id="payerAppNo" name="payerAppNo" class="form-control col-md-12 col-sm-12 col-xs-12" maxlength="20" onkeypress="return dcomethealth.validation.isNumberKey(event, this)"/></div>
                                </div>
                                <div class="col-md-2 col-sm-4 col-xs-8">
                                    <label>Eligibility Amount:</label>
                                    <div><input type="text" id="payerElgbity" name="payerElgbity" class="form-control col-md-12 col-sm-12 col-xs-12" maxlength="9" onkeypress="return dcomethealth.validation.isNumberKey(event, this)" /></div>
                                                                </div>-->
                            </div>
                        </div>
                    </div>
                    <div id="serviceOrder" class="row col-md-12 col-sm-12 col-xs-12">                  
                        <!--<div class="row">-->
                        <div class="row">
                            <div class="col-md-12 col-sm-12 col-xs-12">
                                <hr class="btn-danger">                                    
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12 col-sm-12 col-xs-12">
                                <span class="text-primary"><strong>Service Order</strong></span>
                                <input type="hidden" id="billHRID" name="billHRID" value=""/>
                            </div>
                        </div>
                        <div class="row">
                            <div id="CustomerTable" class="col-md-12 col-sm-12 col-xs-12">
                                <table id="dyn_table" class="col-md-12 col-sm-12 col-xs-12 table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th></th>
                                            <th>Service Name</th>
                                            <th>Quantity</th>
                                            <th>Discount(%)</th>
                                            <th>Cost (<span class="dcomet-c-s_currCode"></span>)</th>                                         
                                            <th>Nett (<span class="dcomet-c-s_currCode"></span>)</th>
                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody id="so_tbody"> 
                                        <!--<tr >onkeypress="calculation()"-->
                                    <td width="3%"><i id="soDel" class="fa fa-minus hidden" onclick="delete_row(this)"></i></td>
                                    <td width="40%">
                                        <input type="text" id="serviceName" name="serviceName" placeholder="Enter Service Name"  onchange="dcomethealth.Patient.autoIdSet(this)" class="col-md-11 col-sm-11 col-xs-11"/>
                                        <input type="hidden" id="serviceRID" name="serviceRID"  value="0"/>
                                        <input type="hidden" id="bdGroupRID" name="bdGroupRID"/>
                                        <input type="hidden" id="serviceCategory" name="serviceCategory"/>
                                    </td>
                                    <td width="10%">
                                        <input id="qtyService" type="text" value = "1" name="qtyService" maxlength="3" onkeypress="return dcomethealth.validation.isNumberKey(event, this)" onchange="calculation()" class="col-md-12 col-sm-12 col-xs-12">
                                    </td>
                                    <td width="10%">
                                        <input type="text" id="serviceDisc" name="serviceDisc" onkeypress="return dcomethealth.validation.isDecimalKey(event, this)" maxlength="3" onBlur="dcomethealth.validation.isPercentaged(this)" onchange="serviceCheck(this)" class="col-md-12 col-sm-12 col-xs-12"/>
                                    </td>
                                    <td width="16%">
                                        <input type="text" id="MRP" name="MRP" onkeypress="return dcomethealth.validation.isDecimalKey(event, this)" maxlength="9" onchange="serviceCheck(this)" class="col-md-12 col-sm-12 col-xs-12" style="text-align: right;"/>
                                    </td>
                                    <td width="16%">
                                        <input type="text" id="netAmount" name="netAmount" onkeyup="tabKeyPress(this, event)" class="col-md-12 col-sm-12 col-xs-12" readonly="readonly" style="text-align: right;"/>
                                    </td>
                                    <td width="5%"><i class="fa fa-plus" onclick="insert_row('dyn_table', this)"></i></td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="alert alert-info pull-right col-md-12 col-md-12 col-sm-12">
                                <div class="col-md-12 col-sm-12 col-xs-12">
                                    <div class="col-xs-12 col-md-2 col-sm-3">
                                        <div class=""><strong>Gross </strong>(<span class="dcomet-c-s_currCode"></span>)</div>
                                        <div class="">                             
                                            <output id="serviceGrossAmount" name="serviceGrossAmount" class="left col-md-3 col-sm-3 col-xs-3" style="border: none"/>
                                        </div>
                                    </div>
                                    <div class="col-xs-6 col-md-2 col-sm-3">
                                        <div class=""><strong>Discount </strong>(<span class="dcomet-c-s_currCode"></span>)</div>
                                        <div class="">                             
                                            <output id="serviceDiscountAmount" name="serviceDiscountAmount" class="col-md-3 col-sm-3 col-xs-6" style="border: none"/>
                                        </div>
                                    </div>
                                    <div class="col-xs-6 col-md-2 col-sm-3">
                                        <div class=""><strong>Round Off </strong>(<span class="dcomet-c-s_currCode"></span>)</div>
                                        <div class="">                             
                                            <output id="round_off_amount" name="round_off_amount" class="col-md-3 col-sm-3 col-xs-6" style="border: none"/>
                                        </div>
                                    </div>
                                    <div class="col-xs-6 col-md-2 col-sm-3">
                                        <div class=""><strong>Nett </strong>(<span class="dcomet-c-s_currCode"></span>)</div>
                                        <div class="">                             
                                            <output id="serviceNetAmount" name="serviceNetAmount" class="col-md-3 col-sm-3 col-xs-6" style="border: none"/>
                                        </div>
                                    </div> 
                                    <div id= "eligibleAmtDiv" class="hidden col-xs-12 col-md-2 col-sm-6">
                                        <div class="row"><strong>PayerAmount </strong> (<span class="dcomet-c-s_currCode"></span>)</div>
                                        <div class="">
                                            <output id="serviceEligibleAmount" name="serviceEligibleAmount" class="col-md-6 col-sm-6 col-xs-12"/>
                                        </div>
                                    </div>                               
                                    <div id="dueAmtDiv" class="hidden col-xs-12 col-md-2 col-sm-6">
                                        <div class=""><strong>Due </strong> (<span class="dcomet-c-s_currCode"></span>)</div>
                                        <div class="">
                                            <output id="serviceDueAmount" name="serviceDueAmount" class="col-md-6 col-sm-6 col-xs-12"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group hidden">
                                <input type="hidden" id="collectPayment" value="0"/>
                            </div>
                        </div>
                        <!--</div>-->
                    </div> 
                    <div id="paymentDiv" class="row col-md-12 col-sm-12 col-xs-12">
                        <div class="">
                            <span class="text-primary"><strong>Payment Details</strong></span><hr class="btn-danger">
                        </div>                        
                        <div class="alert alert-info pull-right col-md-12 col-sm-12 col-xs-12">                            
                            <div class="col-md-12">                                
                                <div id="paymentMode" class="col-md-12 col-sm-12 col-xs-12 hidden">                                        
                                    <table id="pmd_table" class="table table-condensed table-hover" width="100%" border="0" cellspacing="0" cellpadding="0">
                                        <tr>
                                            <td width="2%"><i id="del" class="ace-icon fa fa-minus-circle hidden" onclick="deleterowPay(this)"></i></td>
                                            <td width="5%" onclick=""><div class="btn-group">
                                                    <select id="pay_mode_ddict" name="pay_mode_ddict" class="dcomet-c-s_ddict_payment_mode-list" onchange="openCardInfo(this)" >
                                                    </select></div>
                                            </td>
                                            <td width="8%" id="td_1"><select id="cardtype" name="cardtype"  class="dcomet-c-s_ddict_credit_card_type-list col-md-12 col-sm-12 col-xs-12 hidden" ></select><input class="col-md-12 col-sm-12 col-xs-12 hidden" id="cheqno" name="cheqno" placeholder="Cheque No"/></td>
                                            <td width="7%" id="td_2"><input class="col-md-12 col-sm-12 col-xs-12 hidden" id="bankname" name="bankname" onkeypress="return dcomethealth.validation.ValidateAlpha(event)" placeholder="Bank Name"/></td><input class="col-md-12 col-sm-12 col-xs-12 hidden" id="banknam" name="banknam" onkeypress="return dcomethealth.validation.ValidateAlpha(event)" placeholder="Bank Name"/>
                                        <td width="10%" id="td_3"><input class="col-md-12 col-sm-12 col-xs-12 hidden" id="approvalno" name="approvalno" maxlength="20" onkeypress="return dcomethealth.validation.isNumberKey(event, this)" placeholder="Approval No."/><input class="col-md-12 col-sm-12 col-xs-12 hidden jqueryUIToolTip" title="MM/YYYY Format" id="cheqdate" name="cheqdate" maxlength="10" onkeypress="return dcomethealth.validation.Validatedob(this)" placeholder="Cheque Date"/></td>
                                        <td width="10%" id="td_4"><input class="col-md-12 col-sm-12 col-xs-12 hidden" id="cardno" name="cardno" maxlength="20" onkeypress="return dcomethealth.validation.isNumberKey(event, this)" placeholder="Card No"/><input class="col-md-12 col-sm-12 col-xs-12 hidden" id="branchname" name="branchname" onkeypress="return dcomethealth.validation.ValidateAlpha(event)" placeholder="Branch Name"/></td>
                                        <td class="" width="8%" id="td_5"><input class="col-md-12 col-sm-12 col-xs-12 hidden jqueryUIToolTip" title="MM/YYYY Format" id="expdate" name="expdate" maxlength="10" onkeypress="return dcomethealth.validation.validateDob()(this)" placeholder="Exp Date"/></td><input class="col-md-12 col-sm-12 col-xs-12 hidden jqueryUIToolTip" title="MM/YYYY Format" id="expdat" name="expdat" maxlength="10" onkeypress="return dcomethealth.validation.validateDob(this)" placeholder="Exp Date"/>
                                        <td class="" width="8%" id="td_6"><input class="col-md-12 hidden" id="mobileno" name="mobileno" maxlength="12" onkeypress="return dcomethealth.validation.isNumberKey()(this)" placeholder="Mobile No"/></td><input class="col-md-12 hidden" id="mobileno" name="mobileno" maxlength="10" onkeypress="return dcomethealth.validation.validateAlpha()" placeholder="Mobile No"/>
                                        <td width="5%" onclick=""><div class="btn-group">
                                                <select id="pay_mode_currency" name="pay_mode_currency" onchange="pmdPaid()" >
                                                </select></div>
                                        </td>
                                        <td width="15%"><input class="input-small width-100" id="pmd_amount" name="pmd_amount" maxlength="9" onkeypress="return dcomethealth.validation.isNumberKey(event, this)" onchange="pmdPaid()" type="text" style="text-align: right"/></td>
                                        <td width="2%"><i class="ace-icon fa fa-plus" onclick="insertRowPay('pmd_table', this)"></i></td>
                                        </tr>
                                    </table>                                                              
                                </div>                              
                            </div>   
                            <div class="row col-md-12 col-sm-12 col-xs-12">
                                <table class="table table-condensed table-hover" width="100%" border="0" cellspacing="0" cellpadding="0">
                                    <tr>
                                        <td width="2%"></td>
                                        <td width="5%"></td>
                                        <td width="8%"></td>
                                        <td width="8%"></td>
                                        <td width="10%"></td>
                                        <td width="10%"></td>
                                        <td width="8%"></td>
                                        <td width="8%"></td>
                                        <td width="10%"> <label class=""><strong>Total</strong> (<span class="dcomet-c-s_currCode"></span>)</label></td>
                                        <td width="15%"><input id="total_pmd" class="" name="total_pmd" readonly style="border: none;text-align:right;"/></td>
                                        <td width="2%"></td>
                                    </tr>
                                </table>                          
                            </div>
                            <!--                            <div class="col-md-12 col-sm-12 col-xs-12">                                                      
                                                            <div class="col-md-offset-8 col-sm-8 col-xs-12">
                                                                <label><strong>Total</strong> (<span class="dcomet-c-s_currCode"></span>)</label>
                                                                <input id="total_pmd" name="total_pmd" readonly style="border: none"/>
                                                            </div>
                                                        </div>-->
                        </div>
                    </div>
                    <br>
                    <div id="bedReg" class="row hidden">                           
                        <span class="text-primary"><strong>Bed Registrations</strong></span><hr class="btn-danger"> 
                        <div class="col-md-12 col-sm-12 col-xs-12">
                            <div class="col-md-3 col-sm-6 col-xs-6">
                                <div class="row col-md-12 col-sm-12 col-xs-12">
                                    <strong><span class="text-primary">Total No.of Beds</span><span id="totalBed"></span></strong>
                                </div> 
                            </div>
                            <div class="col-md-3 col-sm-6 col-xs-6">                                   
                                <div class="row col-md-12 col-sm-12 col-xs-12">
                                    <strong><span class="text-primary">Available Rooms</span><span id="totalRoom"></span></strong>
                                </div>
                            </div>
                        </div><br><br>
                        <div class="col-md-12 col-sm-12 col-xs-12"> 
                            <div class="col-md-3 col-sm-3 col-xs-6">
                                <label class="row col-md-12 col-sm-12 col-xs-12 text-primary"><strong>Floor Selection</strong></label>
                                <div class="row col-md-8 col-sm-12 col-xs-12"> 
                                    <select id="grprooms" name="grprooms" class="dcomet-c-s_ddict_bed_group-list form-control">
                                        <option value="0">--Select--</option>
                                    </select>
                                </div>
                            </div>
                            <div class="row col-md-2 col-sm-3 col-xs-4">
                                <label class="row col-md-12 col-sm-12 col-xs-12 text-primary"><strong>Rooms Selection</strong></label>
                                <div class="row col-md-11 col-sm-12 col-xs-12">
                                    <select id="roomType" name="roomType"  onchange="viewBed()" class="form-control">
                                        <option value="0">--Select--</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-2 col-sm-3 col-xs-4">
                                <label class="row col-md-12 col-sm-12 col-xs-12 text-primary"><strong>Admitted Doctor</strong></label>
                                <div class= "row col-md-12 col-sm-12 col-xs-12">
                                    <select id="bocPrimaryDoctor" name="bocPrimaryDoctor" class="dcomet-c-s_doctors-list form-control">
                                        <option value="0">--Select--</option>
                                    </select>
                                </div>
                            </div>
                            <div id="viewBedDiv" class="col-md-5 col-sm-5 col-xs-5">
                                <div class="row col-md-6 col-sm-6 col-xs-6">
                                    <label class="row col-md-6 col-sm-12 col-xs-12 text-primary"><strong>Bed Name </strong></label>
                                    <span id="sBedName" class="row col-md-2 col-sm-12 col-xs-12 text-warning"></span>
                                </div>
                                <div class="row col-md-6 col-sm-6 col-xs-6">
                                    <label class="row col-md-6 col-sm-12 col-xs-12 text-primary"><strong>Bed Charge</strong></label>
                                    <span id="sBedCharge" class="row col-md-2 col-sm-12 col-xs-12 text-warning"></span>
                                    <span id="sBedRid" class="hidden"></span>
                                </div>
                            </div>
                        </div>
                        <div class="row col-md-12 col-sm-12  col-xs-12">
                            <hr class="btn-danger">
                        </div>
                        <div class="row hidden" id="kinDiv">
                            <div class="col-md-12 col-sm-12 col-xs-12">
                                <label class="row col-md-12 col-sm-12 col-xs-12 text-primary"><strong>Kin Details</strong></label> 
                            </div>
                            <div class="col-md-12 col-sm-12 col-xs-12">
                                <div class="row table-responsive col-md-12 col-sm-12 col-xs-12"> <!--- - -->
                                    <table id="kinTable" class="col-md-12 col-sm-12 col-xs-12 table table-condensed table-hover">
                                        <thead id="kinThead" class="">
                                            <tr>
                                                <th></th>
                                                <th>Name</th>
                                                <th>Mobile No.</th>
                                                <th>Relationship</th>
                                                <th>Occupation</th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody id="kinTbody">
                                            <tr>
                                                <td>
                                                    <i id="kinDetailsDel" class="ace-icon fa fa-minus hidden" onclick="deleteRow(this)"></i>
                                                    <input type="hidden" id="kinRid" name="kinRid" value=""/>
                                                </td>
                                                <td>
                                                    <input type="text" id="kinName" name="kinName" onkeypress="return dcomethealth.validation.ValidateAlpha(event)" class="form-control"/>
                                                </td>
                                                <td>
                                                    <input type="text" id="kinMobileNo" name="kinMobileNo" onkeypress="return dcomethealth.validation.isNumberKey(event)" maxlength="10" class="form-control"/>
                                                </td>
                                                <td>
                                                    <select id="kinRelationship" class="form-control dcomet-c-s_ddict_relationship_type-list"></select>
                                                </td>
                                                <td>
                                                    <input type="text" id="kinOccupation" name="kinOccupation" onkeypress="return dcomethealth.validation.ValidateAlpha(event)" class="form-control"/>
                                                </td>
                                                <td>
                                                    <i class="ace-icon fa fa-plus blue" onclick="insertRow('kinTable', this)"></i>
                                                </td>
                                            </tr>
                                        </tbody>  
                                    </table>                   
                                </div>
                            </div>
                        </div>
                    </div>
                </div> 
            </div>
            <div class="modal fade" id="helpModel">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header" >
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="fa fa-times"></i></button>
                            <h4 class="modal-title">Bed Selection</h4> 
                            <span class="col-md-offset-9">Occupied Bed <img src="/health_web/css/images/bedImages/bedOccupy.svg" alt="bedOccupied" width="20" height="20" /></span><!--<span class="badge badgeColor"> </span>-->
                        </div> 
                        <div  class="modal-body" >
                            <div id="bedDetails" class="row col-md-12 col-sm-12 col-xs-12"></div>              
                        </div>
                        <div class="modal-footer" style="border-top: 0"></div> <!--<button type="button" class="btn btn-default" data-dismiss="modal">Add</button>-->
                    </div>
                </div>
            </div>
        </form>  
    </div> 
</div> 
</div> 
<div id="printIdCard" class="hidden"></div>
<script type="text/javascript" src="server/pictures.js"></script>
<script type='text/javascript' src="js/plugins/form-daterangepicker/daterangepicker.min.js"></script>
<script type='text/javascript' src='js/plugins/datatables/dataTables.bootstrap.js'></script>
<script type='text/javascript' src='js/jquery/JsBarcode.all.min.js'></script>